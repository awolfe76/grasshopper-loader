[
  {
    "args": {
      "data": "someshape",
      "host": "localhost",
      "port": 9200,
      "profile": "default"
    },
    "expected": {
      "messages": 3,
      "err": 0
    },
    "env": {},
    "label": "data, host, port"
  },
  {
    "args": {
      "data": "some.csv",
      "host": "localhost",
      "port": 9200,
      "profile": "default"
    },
    "expected": {
      "messages": 1,
      "err": 1
    },
    "env": {},
    "label": "csv unformatted"
  },
  {
    "args": {
      "data": "some.csv",
      "host": "localhost",
      "port": 9200,
      "profile": "default",
      "preformatted": true
    },
    "expected": {
      "messages": 4,
      "err": 0
    },
    "env": {},
    "label": "csv preformatted"
  },
  {
    "args": {
      "data": "someshape",
      "profile": "default",
      "host": "es",
      "port": 9200
    },
    "expected": {
      "messages": 2,
      "err": 0
    },
    "env": {
      "ELASTICSEARCH_PORT": "tcp: //123.45.6.789: 1234"
    },
    "label": "data, ELASTICSEARCH_PORT"
  },
  {
    "args": {
      "data": "http://www.google.com/fake.txt",
      "host": "localhost",
      "port": 9200
    },
    "expected": {
      "messages": 1,
      "err": 1
    },
    "env": {},
    "label": "Url test with bad filetype"
  },
  {
    "args": {
      "data": "http://www.google.com/fake.zip",
      "host": "localhost",
      "port": 9200,
      "profile": "default"
    },
    "expected": {
      "messages": 3,
      "err": 0
    },
    "env": {},
    "label": "Url with good filetype"
  },
  {
    "args": {
      "port": 9201
    },
    "expected": {
      "messages": 1,
      "err": 1
    },
    "env": {},
    "label": "Non-default port, no data"
  },
  {
    "args": {
      "port": null
    },
    "expected": {
      "messages": 2,
      "err": 1
    },
    "env": {},
    "label": "No data, bad port"
  },
  {
    "args": {
      "bucket": "abuck",
      "data": "data",
      "host": "localhost",
      "port": 9200
    },
    "expected": {
      "messages": 4,
      "err": 0
    },
    "env": {
      "AWS_ACCESS_KEY_ID": 1
    },
    "label": "Bucket, env variables"
  },
  {
    "args": {
      "bucket": "abuck",
      "data": "data",
      "profile": "www",
      "host": "localhost",
      "port": 9200
    },
    "expected": {
      "messages": 4,
      "err": 0
    },
    "env": {},
    "label": "Bucket, data, profile"
  },
  {
    "args": {
      "bucket": "anotherb",
      "host": "localhost",
      "port": 9200
    },
    "expected": {
      "messages": 5,
      "err": 0
    },
    "env": {},
    "label": "Bucket only"
  },
  {
    "args": {
      "data": "da",
      "profile": "unneeded",
      "host": "localhost",
      "port": 9200
    },
    "expected": {
      "messages": 4,
      "err": 0
    },
    "env": {},
    "label": "Data, unnecessary profile"
  },
  {
    "args": {
      "bucket": "buck3",
      "transformer": "arkansas",
      "host": "localhost",
      "port": 9200
    },
    "expected": {
      "messages": 5,
      "err": 0
    },
    "env": {},
    "label": "Bucket and transformer"
  },
  {
    "args": {
      "data": "someshape",
      "host": "localhost",
      "port": 9200,
      "profile": "default",
      "sourceSrs": "NAD83"
    },
    "expected": {
      "messages": 4,
      "err": 0
    },
    "env": {},
    "label": "source-srs provided"
  },
  {
    "args": {
      "data": "someshape",
      "host": "localhost",
      "port": 9200,
      "profile": "default",
      "preformatted": 1
    },
    "expected": {
      "messages": 4,
      "err": 0
    },
    "env": {},
    "label": "preformatted"
  },
  {
    "args": {
      "data": "someshape",
      "host": "localhost",
      "port": 9200,
      "preformatted": 1,
      "sourceSrs": "NAD83"
    },
    "expected": {
      "messages": 1,
      "err": 1
    },
    "env": {},
    "label": "preformatted and source-srs"
  }
]
